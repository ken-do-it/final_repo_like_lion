# ğŸ‡°ğŸ‡· Korea Trip - ì—¬í–‰ ê³„íš í”Œë«í¼

ì™¸êµ­ì¸ ê´€ê´‘ê°ì„ ìœ„í•œ í•œêµ­ ì—¬í–‰ ê³„íš ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.  
AI ê¸°ë°˜ ì—¬í–‰ ì¶”ì²œ, ì¼ì • ê´€ë¦¬, ìˆí¼ ì½˜í…ì¸ , ì˜ˆì•½ ì‹œìŠ¤í…œì„ ì œê³µí•©ë‹ˆë‹¤.

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

| êµ¬ë¶„ | ë‚´ìš© |
|------|------|
| í”„ë¡œì íŠ¸ëª… | Korea Trip |
| ê°œë°œ ê¸°ê°„ | 2025.12 ~ |
| íŒ€ êµ¬ì„± | Backend, Frontend, AI, DevOps |
| ë¼ì´ì„ ìŠ¤ | Apache 2.0 |

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Traefik Ingress                      â”‚
â”‚                  (k3s Load Balancer)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚             â”‚
        â–¼             â–¼             â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ React   â”‚  â”‚  Django  â”‚  â”‚ FastAPI  â”‚
   â”‚ Frontendâ”‚  â”‚  Backend â”‚  â”‚ AI Serverâ”‚
   â”‚ :80     â”‚  â”‚  :8000   â”‚  â”‚  :8001   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚             â”‚             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
               â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
               â”‚ PostgreSQL  â”‚
               â”‚  Database   â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Django 6.0** - ì‚¬ìš©ì ì¸ì¦, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- **Django REST Framework** - RESTful API
- **FastAPI** - AI ì¶”ì²œ ì„œë²„
- **PostgreSQL** - ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤

### Frontend
- **React 19** - SPA í”„ë ˆì„ì›Œí¬
- **Vite 7** - ë¹Œë“œ ë„êµ¬

### DevOps
- **Docker** - ì»¨í…Œì´ë„ˆí™”
- **k3s** - ê²½ëŸ‰ Kubernetes
- **GitHub Actions** - CI/CD íŒŒì´í”„ë¼ì¸
- **Traefik** - Ingress Controller

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
final_repo/
â”œâ”€â”€ django_app/              # Django ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ config/              # í”„ë¡œì íŠ¸ ì„¤ì •
â”‚   â”œâ”€â”€ users/               # ì‚¬ìš©ì ê´€ë¦¬
â”‚   â”œâ”€â”€ places/              # ì¥ì†Œ ì •ë³´
â”‚   â”œâ”€â”€ plans/               # ì—¬í–‰ ì¼ì •
â”‚   â”œâ”€â”€ contents/            # ìˆí¼ ì½˜í…ì¸ 
â”‚   â”œâ”€â”€ reservations/        # ì˜ˆì•½ ì‹œìŠ¤í…œ
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ fastapi_app/             # FastAPI AI ì„œë²„
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ frontend/                # React í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ k8s/                     # Kubernetes ë§¤ë‹ˆí˜ìŠ¤íŠ¸
â”‚   â”œâ”€â”€ django.yaml
â”‚   â”œâ”€â”€ fastapi.yaml
â”‚   â”œâ”€â”€ frontend.yaml
â”‚   â””â”€â”€ ingress.yaml
â”‚
â””â”€â”€ .github/
    â””â”€â”€ workflows/
        â””â”€â”€ deploy.yml       # CI/CD íŒŒì´í”„ë¼ì¸
```

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### ì£¼ìš” ëª¨ë¸

| ì•± | ëª¨ë¸ | ì„¤ëª… |
|----|------|------|
| users | User | ì‚¬ìš©ì ì •ë³´ (ì†Œì…œ ë¡œê·¸ì¸ ì§€ì›) |
| users | UserPreference | ì–¸ì–´, ì•Œë¦¼ ì„¤ì • |
| users | LocalBadge | í˜„ì§€ì¸ ì¸ì¦ ë±ƒì§€ |
| places | Place | ì¥ì†Œ ì •ë³´ (ì¹´ì¹´ì˜¤ API ì—°ë™) |
| places | PlaceReview | ì¥ì†Œ ë¦¬ë·° |
| plans | TravelPlan | ì—¬í–‰ ì¼ì • |
| plans | TravelPost | ì—¬í–‰ê¸° ê²Œì‹œê¸€ |
| contents | Shortform | ìˆí¼ ì˜ìƒ |
| contents | TranslationEntry | AI ë²ˆì—­ ìºì‹œ |
| reservations | Reservation | ì˜ˆì•½ ì •ë³´ |

## ğŸš€ CI/CD íŒŒì´í”„ë¼ì¸

> âš ï¸ **í˜„ì¬ ìƒíƒœ (2025.12.29 ê¸°ì¤€)**  
> - âœ… CI (Build & Push): **ì •ìƒ ì‘ë™** - Docker Hubì— ì´ë¯¸ì§€ í‘¸ì‹œ ì„±ê³µ  
> - âŒ CD (Deploy): **ë¯¸ì‘ë™** - EC2 Elastic IP ë¯¸ì„¤ì •ìœ¼ë¡œ ë°°í¬ ë‹¨ê³„ ì‹¤íŒ¨  
> - ğŸ“‹ TODO: GitHub Secretsì— `EC2_HOST` ë“±ë¡ í•„ìš”

```
[GitHub Push (main)]
        â”‚
        â–¼
[GitHub Actions íŠ¸ë¦¬ê±°]
        â”‚
        â”œâ”€â”€ âœ… Django ì´ë¯¸ì§€ ë¹Œë“œ & Docker Hub í‘¸ì‹œ
        â”œâ”€â”€ âœ… FastAPI ì´ë¯¸ì§€ ë¹Œë“œ & Docker Hub í‘¸ì‹œ
        â””â”€â”€ âœ… Frontend ì´ë¯¸ì§€ ë¹Œë“œ & Docker Hub í‘¸ì‹œ
        â”‚
        â–¼
[EC2 SSH ì ‘ì†] âŒ EC2_HOST ë¯¸ì„¤ì •
        â”‚
        â–¼
[kubectl rollout restart]
        â”‚
        â–¼
[ë°°í¬ ì™„ë£Œ ğŸš€]
```

## âš™ï¸ ë¡œì»¬ ê°œë°œ í™˜ê²½ ì„¤ì •

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- Python 3.12+
- Node.js 22+
- Docker & Docker Compose
- Conda (Anaconda ë˜ëŠ” Miniconda) - ì„ íƒì‚¬í•­

---

### ë°©ë²• 1: Conda ì‚¬ìš© (ê¶Œì¥)

#### Backend (Django)

```bash
# Conda í™˜ê²½ ìƒì„±
conda create -n korea-trip-django python=3.12 -y
conda activate korea-trip-django

# ì˜ì¡´ì„± ì„¤ì¹˜ ë° ì‹¤í–‰
cd django_app
pip install -r requirements.txt
python manage.py migrate
python manage.py runserver
```

#### Backend (FastAPI)

```bash
# Conda í™˜ê²½ ìƒì„±
conda create -n korea-trip-ai python=3.12 -y
conda activate korea-trip-ai

# ì˜ì¡´ì„± ì„¤ì¹˜ ë° ì‹¤í–‰
cd fastapi_app
pip install -r requirements.txt
uvicorn main:app --reload --port 8001
```

#### Frontend (React)

```bash
cd frontend
npm install
npm run dev
```

---

### ë°©ë²• 2: venv ì‚¬ìš©

#### Backend (Django)

```bash
cd django_app
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
python manage.py migrate
python manage.py runserver
```

#### Backend (FastAPI)

```bash
# Conda í™˜ê²½ ìƒì„±
conda create -n korea-trip-ai python=3.12 -y
conda activate korea-trip-ai

# ì˜ì¡´ì„± ì„¤ì¹˜ ë° ì‹¤í–‰
cd fastapi_app
pip install -r requirements.txt
uvicorn main:app --reload --port 8001
```

#### Frontend (React)

```bash
cd frontend
npm install
npm run dev
```

## ğŸ” í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

### GitHub Secrets (CI/CDìš©)

| Secret ì´ë¦„ | ì„¤ëª… |
|-------------|------|
| `DOCKER_USERNAME` | Docker Hub ì‚¬ìš©ìëª… |
| `DOCKER_PASSWORD` | Docker Hub ë¹„ë°€ë²ˆí˜¸ |
| `EC2_HOST` | EC2 Elastic IP |
| `EC2_USERNAME` | EC2 SSH ì‚¬ìš©ìëª… |
| `EC2_SSH_KEY` | EC2 SSH ê°œì¸í‚¤ |

### Django í™˜ê²½ ë³€ìˆ˜ (ì¶”ê°€ ì˜ˆì •)

```env
SECRET_KEY=your-secret-key
DEBUG=False
DATABASE_URL=postgres://user:pass@host:5432/dbname
ALLOWED_HOSTS=your-domain.com
```

## ğŸ“¦ í•„ìˆ˜ OS íŒ¨í‚¤ì§€ (ffmpeg/ffprobe)
- ì˜ìƒ ë©”íƒ€ë°ì´í„°(duration/width/height) ì¶”ì¶œê³¼ ì¸ë„¤ì¼ ìƒì„±ì„ ìœ„í•´ ffprobe(=ffmpeg íŒ¨í‚¤ì§€)ì´ í•„ìš”í•©ë‹ˆë‹¤.
- Windows: `winget install --id Gyan.FFmpeg -e --source winget` (ë˜ëŠ” `choco install ffmpeg`)
- Ubuntu/Debian: `sudo apt update && sudo apt install -y ffmpeg`
- Amazon Linux 2023/CentOS: `sudo dnf install -y ffmpeg` (ë˜ëŠ” `sudo yum install -y ffmpeg`)
- í™•ì¸: `ffprobe -version`, `ffmpeg -version`
- ì£¼ì˜: ffmpeg/ffprobeëŠ” Python íŒ¨í‚¤ì§€ê°€ ì•„ë‹ˆë¯€ë¡œ `requirements.txt`ì—ëŠ” í¬í•¨ë˜ì§€ ì•Šìœ¼ë©°, ë°°í¬ ìŠ¤í¬ë¦½íŠ¸/ì„œë²„ í”„ë¡œë¹„ì €ë‹ ë‹¨ê³„ì—ì„œ OS íŒ¨í‚¤ì§€ë¡œ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
- ì°¸ê³ : `pip install Pillow`ëŠ” ì˜ìƒ ë©”íƒ€ë°ì´í„°(ffprobe) ëŒ€ì²´ê°€ ë¶ˆê°€í•©ë‹ˆë‹¤. ì¸ë„¤ì¼ í›„ì²˜ë¦¬ ì‹œ ì´ë¯¸ì§€ë¥¼ ë‹¤ë£¨ê¸° ìœ„í•´ ì„ íƒì ìœ¼ë¡œ ì¶”ê°€í•  ìˆ˜ ìˆì§€ë§Œ, ì˜ìƒ í”„ë ˆì„ ì¶”ì¶œì€ ì—¬ì „íˆ ffmpegê°€ í•„ìš”í•©ë‹ˆë‹¤.
- ë°°í¬ ì‹œ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •(í•„ìš”í•œ ê²½ìš° ê²½ë¡œ ì§ì ‘ ì§€ì • .envì— ì§ì ‘ ì‘ì„±):
  - ì˜ˆì‹œ (Linux): `FFPROBE_BIN=/usr/bin/ffprobe`, `FFMPEG_BIN=/usr/bin/ffmpeg`
  - ì˜ˆì‹œ (Windows): `FFPROBE_BIN=C:\Users\...\ffprobe.exe`, `FFMPEG_BIN=C:\Users\...\ffmpeg.exe`
  - OSì— ffmpegë¥¼ ì„¤ì¹˜í•˜ê³  PATHì— ì¡íˆë©´ env ì„¤ì •ì´ ì—†ì–´ë„ ë™ì‘í•˜ì§€ë§Œ, ì„œë¹„ìŠ¤ ì‹¤í–‰ ê³„ì •ì—ì„œ ëª» ì°¾ì„ ê²½ìš° ìœ„ envë¥¼ ëª…ì‹œí•©ë‹ˆë‹¤.

## ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

### Ingress ë¼ìš°íŒ… ê·œì¹™

| ê²½ë¡œ | ì„œë¹„ìŠ¤ | ì„¤ëª… |
|------|--------|------|
| `/api/ai/*` | FastAPI (8001) | AI ì¶”ì²œ API |
| `/api/*` | Django (8000) | ë°±ì—”ë“œ API |
| `/*` | Frontend (80) | React SPA |

## ğŸ§ª í…ŒìŠ¤íŠ¸

```bash
# Django í…ŒìŠ¤íŠ¸
cd django_app
python manage.py test

# Frontend ë¦°íŠ¸
cd frontend
npm run lint
```

## ğŸ“‹ í–¥í›„ ê°œë°œ ê³„íš

- [ ] í™˜ê²½ ë³€ìˆ˜ ë¶„ë¦¬ (SECRET_KEY ë“±)
- [ ] Dockerfile ì™„ì„± (gunicorn/uvicorn ì‹¤í–‰)
- [ ] PostgreSQL ì—°ë™
- [ ] CORS ì„¤ì •
- [ ] API ë¬¸ì„œí™” (Swagger)
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
- [ ] ì¹´ì¹´ì˜¤ë§µ API ì—°ë™
- [ ] AI ì—¬í–‰ ì¶”ì²œ ê¸°ëŠ¥ êµ¬í˜„


## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” [Apache License 2.0](LICENSE) ë¼ì´ì„ ìŠ¤ë¥¼ ë”°ë¦…ë‹ˆë‹¤.


# fastapi aië²ˆì—­ í¬íŠ¸8003ë²ˆ